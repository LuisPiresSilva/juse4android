package org.quasar.usemodel2Android.defaultdata.java;

import java.io.Serializable;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.AsyncTask;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

public class ListAdapter extends ArrayAdapter<Object> implements Serializable {

	private Activity activity;
	private ListViewHolder holder;
//	private int itemsToLoad;
//	private Object object;
//	private ListAdapter adapter;

	public ListAdapter(Context context, ListViewHolder view, Object object) {// ...2One
		super(context, 0);
		this.activity = (Activity) context;
		this.holder = view;
//		this.itemsToLoad = activity.getResources().getInteger(R.integer.number_items_loaded_in_list);
//		this.object = object;
//		this.adapter = this;

//		int i = 0;
//		for (Iterator<?> iterator = ((Iterable<?>) object).iterator();
//				iterator.hasNext() && i < itemsToLoad; i++) {
////				iterator.hasNext();){
//			this.add(iterator.next());
//		}
		for(Iterator<?> iterator = ((Collection<?>) object).iterator(); iterator.hasNext();)
			this.add(iterator.next());

	}

	@Override
	public View getView(int position, View convertView, ViewGroup parent) {
		if (convertView == null)
			convertView = holder.setNewViewHolder(activity, convertView);
		
		return holder.setViewHolderContent(convertView, getItem(position));
	}

//	public AsyncTask<Void, String, Collection<Object>> loadMoreListItems(
//			boolean loadingMore) {
//		if (this.getCount() < ((Collection<Object>) object).size()) {
//			AsyncTask<Void, String, Collection<Object>> task = new AsyncTask<Void, String, Collection<Object>>() {
//				@Override
//				protected Collection<Object> doInBackground(Void... params) {
//					try {
//						Thread.sleep(1000);
//					} catch (InterruptedException e) {
//					}
//					List<Object> temp = new java.util.ArrayList<Object>(itemsToLoad);
//					Object item = new Object();
//					// Get 15 new listitems
//					for (Iterator<?> iterator = ((Iterable<?>) object)
//							.iterator(); iterator.hasNext();) {
//						item = iterator.next();
//						if (adapter.getPosition(item) < 0)// if adapter don't
//															// contains the item
//							temp.add(item);
//						if (temp.size() == itemsToLoad)
//							break;
//					}
//					return temp;
//				}
//			}.execute();
//			return task;
//		}
//		return null;
//	}
}
